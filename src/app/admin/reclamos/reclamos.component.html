<div class="container-fluid py-4 bg-light min-vh-100">
    <!-- Header -->
    <div class="row mb-3">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4 pb-4 border-bottom border-2 border-primary border-opacity-25">
                <h1 class="h2 mb-1 text-dark fw-bold">
                    <i class="fas fa-exclamation-triangle text-primary"></i>
                    Gestión de Reclamos y Quejas
                </h1>
            </div>            
            <div class="row mb-4" *ngIf="estadisticas">
    <div class="col-xl-2 col-lg-4 col-md-6">
        <div class="card stat-card stat-card-total h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-primary bg-opacity-10 text-primary mb-2">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.total | number }}</div>
                        <div class="stat-label">Total de Casos</div>
                        <div class="stat-trend text-muted">
                            <small><i class="fas fa-info-circle me-1"></i>Todos los registros</small>
                        </div>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-warning h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-warning bg-opacity-10 text-warning mb-2">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.pendientes | number }}</div>
                        <div class="stat-label">Pendientes</div>
                        <div class="stat-trend" [class]="getPorcentajePendientes() > 50 ? 'text-warning' : 'text-muted'">
                            <small>
                                <i class="fas fa-percentage me-1"></i>
                                {{ getPorcentajePendientes() }}% del total
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-warning bg-opacity-20 text-warning" *ngIf="estadisticas.pendientes > 0">
                        <i class="fas fa-exclamation"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-info h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-info bg-opacity-10 text-info mb-2">
                            <i class="fas fa-cog fa-spin"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.en_proceso | number }}</div>
                        <div class="stat-label">En Proceso</div>
                        <div class="stat-trend text-info">
                            <small>
                                <i class="fas fa-arrow-right me-1"></i>
                                {{ getPorcentajeEnProceso() }}% activos
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-info bg-opacity-20 text-info" *ngIf="estadisticas.en_proceso > 0">
                        <div class="spinner-border spinner-border-sm"></div>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-success h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-success bg-opacity-10 text-success mb-2">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.resueltas | number }}</div>
                        <div class="stat-label">Resueltas</div>
                        <div class="stat-trend text-success">
                            <small>
                                <i class="fas fa-chart-line me-1"></i>
                                {{ getPorcentajeResueltas() }}% completadas
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-success bg-opacity-20 text-success" *ngIf="estadisticas.resueltas > 0">
                        <i class="fas fa-check"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-danger h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-danger bg-opacity-10 text-danger mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.reclamos | number }}</div>
                        <div class="stat-label">Reclamos</div>
                        <div class="stat-trend text-danger">
                            <small>
                                <i class="fas fa-fire me-1"></i>
                                {{ getPorcentajeReclamos() }}% críticos
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-danger bg-opacity-20 text-danger" *ngIf="estadisticas.reclamos > 0">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-secondary h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-secondary bg-opacity-10 text-secondary mb-2">
                            <i class="fas fa-comment-dots"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.quejas | number }}</div>
                        <div class="stat-label">Quejas</div>
                        <div class="stat-trend text-secondary">
                            <small>
                                <i class="fas fa-comment me-1"></i>
                                {{ getPorcentajeQuejas() }}% del total
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-secondary bg-opacity-20 text-secondary" *ngIf="estadisticas.quejas > 0">
                        <i class="fas fa-comment"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>
</div>
        </div>
    </div>

    <!-- Filtros -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h6 class="card-title text-dark fw-bold mb-3">
                <i class="fas fa-filter text-primary me-2"></i>
                Filtros de búsqueda
            </h6>

            <div class="row row-cols-lg-6 row-cols-md-3 row-cols-2 g-3">
                <!-- Búsqueda -->
                <div class="col">
                    <label class="form-label small fw-semibold text-muted">
                        <i class="fas fa-search me-1"></i> Buscar:
                    </label>
                    <input
                        type="text"
                        class="form-control form-control-sm"
                        placeholder="Número, DNI, nombre..."
                        [(ngModel)]="filtros.buscar"
                        (keyup.enter)="aplicarFiltros()"
                    />
                </div>

                <!-- Estado -->
                <div class="col">
                    <label class="form-label small fw-semibold text-muted">Estado:</label>
                    <select class="form-select form-select-sm" [(ngModel)]="filtros.estado">
                        <option *ngFor="let opcion of estadosOptions" [value]="opcion.value">
                            {{ opcion.label }}
                        </option>
                    </select>
                </div>

                <!-- Tipo -->
                <div class="col">
                    <label class="form-label small fw-semibold text-muted">Tipo:</label>
                    <select class="form-select form-select-sm" [(ngModel)]="filtros.tipo_reclamo">
                        <option *ngFor="let opcion of tiposReclamoOptions" [value]="opcion.value">
                            {{ opcion.label }}
                        </option>
                    </select>
                </div>

                <!-- Fecha desde -->
                <div class="col">
                    <label class="form-label small fw-semibold text-muted">Desde:</label>
                    <input
                        type="date"
                        class="form-control form-control-sm"
                        [(ngModel)]="filtros.fecha_desde"
                    />
                </div>

                <!-- Fecha hasta -->
                <div class="col">
                    <label class="form-label small fw-semibold text-muted">Hasta:</label>
                    <input
                        type="date"
                        class="form-control form-control-sm"
                        [(ngModel)]="filtros.fecha_hasta"
                    />
                </div>

                <!-- Espacio para mantener el grid -->
                <div class="col">
                </div>
            </div>

            <!-- Botones -->
            <div class="border-top pt-3 mt-3 d-flex justify-content-end gap-2">
                <button class="btn btn-primary btn-sm px-3" (click)="aplicarFiltros()">
                    <i class="fas fa-filter me-1"></i> Buscar
                </button>
                <button class="btn btn-outline-secondary btn-sm px-3" (click)="limpiarFiltros()">
                    <i class="fas fa-eraser me-1"></i> Limpiar
                </button>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div *ngIf="cargando" class="card shadow-sm border-0">
        <div class="card-body text-center py-5">
            <div class="loading-spinner mx-auto mb-4"></div>
            <h5 class="text-primary mb-2">Cargando reclamos...</h5>
            <p class="text-muted small mb-0">Esto puede tardar unos segundos</p>
        </div>
    </div>

    <!-- Error -->
    <div *ngIf="error && !cargando" class="card shadow-sm border-0 border-start border-danger border-4">
        <div class="card-body text-center py-5">
            <div class="text-danger mb-4">
                <i class="fas fa-exclamation-triangle fs-1 mb-3 d-block"></i>
                <h5>Oops! Algo salió mal</h5>
                <p class="mb-0">{{ error }}</p>
            </div>
            <button class="btn btn-primary" (click)="cargarReclamos()">
                <i class="fas fa-refresh me-1"></i>
                Reintentar
            </button>
        </div>
    </div>

    <!-- Tabla de reclamos -->
    <div *ngIf="!cargando && !error" class="card shadow-sm border-0">
        <!-- Info de resultados -->
        <div class="card-header bg-gradient-primary text-white d-flex justify-content-between align-items-center flex-wrap gap-3 py-3">
            <div class="d-flex align-items-center gap-2">
                <i class="fas fa-chart-bar"></i>
                <span class="fw-medium">
                    Mostrando {{ reclamos.length }} de {{ paginacion?.total || 0 }} reclamos
                </span>
            </div>
        </div>

        <!-- Tabla -->
        <div class="table-responsive">
            <table class="table table-hover mb-0 align-middle">
                <thead class="table-dark">
                    <tr>
                        <th scope="col" class="text-center" style="width: 120px;">
                            <i class="fas fa-hashtag me-1"></i> Código
                        </th>
                        <th scope="col" style="min-width: 200px;">
                            <i class="fas fa-user me-1"></i> Cliente
                        </th>
                        <th scope="col" class="text-center" style="width: 120px;">
                            <i class="fas fa-tag me-1"></i> Tipo
                        </th>
                        <th scope="col" class="text-center" style="width: 120px;">
                            <i class="fas fa-clipboard-check me-1"></i> Estado
                        </th>
                        <th scope="col" class="text-center" style="width: 170px;">
                            <i class="fas fa-calendar me-1"></i> Fecha
                        </th>
                        <th scope="col" class="text-center" style="width: 120px;">
                            <i class="fas fa-cogs"></i>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reclamo of reclamos" class="reclamo-row">
                        
                        <!-- Código -->
                        <td class="text-center">
                            <span class="badge bg-light text-dark border">
                                {{ reclamo.numero_reclamo }}
                            </span>
                        </td>

                        <!-- Cliente -->
                        <td>
                            <div class="fw-bold text-dark mb-1 small">
                                {{ getNombreCompleto(reclamo) }}
                            </div>
                            <div class="text-muted small">
                                <div>
                                    <i class="fas fa-id-card me-1"></i>{{ reclamo.numero_documento }}
                                </div>
                                <div *ngIf="reclamo.email">
                                    <i class="fas fa-envelope me-1"></i>{{ reclamo.email }}
                                </div>
                            </div>
                        </td>

                        <!-- Tipo -->
                        <td class="text-center">
                            <span 
                                class="badge px-3"
                                [class.bg-danger]="reclamo.tipo_reclamo === 'reclamo'"
                                [class.bg-secondary]="reclamo.tipo_reclamo === 'queja'"
                            >
                                {{ reclamo.tipo_reclamo | titlecase }}
                            </span>
                        </td>

                        <!-- Estado -->
                        <td class="text-center">
                            <span
                                class="badge px-3"
                                [class.bg-warning]="reclamo.estado === 'pendiente'"
                                [class.bg-info]="reclamo.estado === 'en_proceso'"
                                [class.bg-success]="reclamo.estado === 'resuelto'"
                                [class.text-dark]="reclamo.estado === 'pendiente'"
                            >
                                {{ reclamo.estado === 'en_proceso' ? 'En Proceso' : (reclamo.estado | titlecase) }}
                            </span>
                        </td>

                        <!-- Fecha -->
                        <td class="text-center">
                            <div class="text-muted small font-monospace">
                                <div>{{ formatearFecha(reclamo.created_at) }}</div>
                            </div>
                        </td>

                        <!-- Acciones -->
                        <td class="text-center">
                            <div class="btn-group" role="group">
                                <button
                                    class="btn btn-info btn-sm"
                                    (click)="verDetalle(reclamo)"
                                    title="Ver detalles"
                                >
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                    <!-- Estado vacío -->
                    <tr *ngIf="reclamos.length === 0">
                        <td colspan="6" class="text-center py-5">
                            <div class="empty-state">
                                <h4 class="text-muted mb-3">No hay reclamos disponibles</h4>
                                <p class="text-muted mb-4">
                                    No se encontraron reclamos que coincidan con los filtros aplicados.
                                    <br>
                                    <small>Intenta ajustar los criterios de búsqueda o mostrar todos los reclamos.</small>
                                </p>
                                <div class="d-flex gap-2 justify-content-center">
                                    <button class="btn btn-outline-primary" (click)="limpiarFiltros()">
                                        <i class="fas fa-eye me-1"></i>
                                        Ver todos los reclamos
                                    </button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Paginación -->
        <div *ngIf="paginacion && paginacion.last_page > 1" class="card-footer bg-light border-0">
            <nav aria-label="Paginación de reclamos" class="d-flex justify-content-center">
                <ul class="pagination mb-0">
                    
                    <!-- Primera página -->
                    <li class="page-item" [class.disabled]="paginacion.current_page === 1">
                        <button class="page-link" 
                                [disabled]="paginacion.current_page === 1"
                                (click)="cambiarPagina(1)">
                            <i class="fas fa-angle-double-left"></i>
                        </button>
                    </li>

                    <!-- Anterior -->
                    <li class="page-item" [class.disabled]="paginacion.current_page === 1">
                        <button class="page-link" 
                                [disabled]="paginacion.current_page === 1"
                                (click)="cambiarPagina(paginacion.current_page - 1)">
                            <i class="fas fa-angle-left"></i>
                            Anterior
                        </button>
                    </li>

                    <!-- Números de página -->
                    <ng-container *ngFor="let pagina of getPaginasVisibles()">
                        <li *ngIf="pagina !== -1" 
                            class="page-item" 
                            [class.active]="pagina === paginacion.current_page">
                            <button class="page-link fw-bold" (click)="cambiarPagina(pagina)">
                                {{ pagina }}
                            </button>
                        </li>
                        <li *ngIf="pagina === -1" class="page-item disabled">
                            <span class="page-link">...</span>
                        </li>
                    </ng-container>

                    <!-- Siguiente -->
                    <li class="page-item" [class.disabled]="paginacion.current_page === paginacion.last_page">
                        <button class="page-link" 
                                [disabled]="paginacion.current_page === paginacion.last_page"
                                (click)="cambiarPagina(paginacion.current_page + 1)">
                            Siguiente
                            <i class="fas fa-angle-right"></i>
                        </button>
                    </li>

                    <!-- Última página -->
                    <li class="page-item" [class.disabled]="paginacion.current_page === paginacion.last_page">
                        <button class="page-link" 
                                [disabled]="paginacion.current_page === paginacion.last_page"
                                (click)="cambiarPagina(paginacion.last_page)">
                            <i class="fas fa-angle-double-right"></i>
                        </button>
                    </li>
                </ul>
            </nav>
        </div>

    </div>
</div>

<!-- Modal de detalle del reclamo -->
<div *ngIf="mostrandoDetalle && reclamoSeleccionado" class="modal fade show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);" (click)="cerrarDetalle()">
    <div class="modal-dialog modal-xl modal-dialog-scrollable modal-dialog-centered" (click)="$event.stopPropagation()">
        <div class="modal-content shadow-lg border-0">
            <!-- Header del modal -->
            <div class="modal-header border-0" style="background: #dc3545;">
                <div class="d-flex align-items-center text-white">
                    <i class="fas fa-exclamation-triangle fs-4 me-3"></i>
                    <div>
                        <h4 class="modal-title fw-semibold">
                            Detalle del {{ reclamoSeleccionado.tipo_reclamo | titlecase }} {{ reclamoSeleccionado.numero_reclamo }}
                        </h4>
                        <small class="opacity-75" *ngIf="reclamoSeleccionado">
                            {{ formatearFecha(reclamoSeleccionado.created_at) }}
                        </small>
                    </div>
                </div>
                <button type="button" class="btn-close btn-close-white" (click)="cerrarDetalle()" aria-label="Close"></button>
            </div>

            <!-- Contenido del modal -->
            <div *ngIf="reclamoSeleccionado" class="modal-body p-4">
                
                <!-- Badge de Estado Principal -->
                <div class="text-center mb-4">
                    <span class="badge fs-6 px-4 py-2 rounded-pill"
                          [class.bg-warning]="reclamoSeleccionado.estado === 'pendiente'"
                          [class.bg-info]="reclamoSeleccionado.estado === 'en_proceso'"
                          [class.bg-success]="reclamoSeleccionado.estado === 'resuelto'"
                          [class.text-dark]="reclamoSeleccionado.estado === 'pendiente'">
                        <i class="fas fa-circle me-2" style="font-size: 0.5em;"></i>
                        {{ reclamoSeleccionado.estado === 'en_proceso' ? 'En Proceso' : (reclamoSeleccionado.estado | titlecase) }}
                    </span>
                </div>

                <!-- Tarjetas de Información -->
                <div class="row g-4">
                    
                    <!-- Información del Cliente -->
                    <div class="col-lg-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-header bg-transparent border-0 pb-0">
                                <div class="d-flex align-items-center">
                                    <div class="bg-primary bg-opacity-10 rounded-circle p-2 me-3">
                                        <i class="fas fa-user text-primary"></i>
                                    </div>
                                    <h6 class="mb-0 fw-semibold">Información del Cliente</h6>
                                </div>
                            </div>
                            <div class="card-body pt-3">
                                <div class="row g-3">
                                    <div class="col-12">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-user-circle text-muted me-2 mt-1"></i>
                                            <div class="flex-grow-1">
                                                <small class="text-muted d-block">Nombre completo</small>
                                                <span class="fw-medium">{{ getNombreCompleto(reclamoSeleccionado) }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-id-card text-muted me-2 mt-1"></i>
                                            <div class="flex-grow-1">
                                                <small class="text-muted d-block">Documento</small>
                                                <span class="fw-medium">{{ reclamoSeleccionado.tipo_documento | uppercase }} - {{ reclamoSeleccionado.numero_documento }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-phone text-muted me-2 mt-1"></i>
                                            <div class="flex-grow-1">
                                                <small class="text-muted d-block">Teléfono</small>
                                                <span class="fw-medium">{{ reclamoSeleccionado.telefono || 'No registrado' }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-envelope text-muted me-2 mt-1"></i>
                                            <div class="flex-grow-1">
                                                <small class="text-muted d-block">Email</small>
                                                <span class="fw-medium text-break">{{ reclamoSeleccionado.email }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-map-marker-alt text-muted me-2 mt-1"></i>
                                            <div class="flex-grow-1">
                                                <small class="text-muted d-block">Dirección</small>
                                                <span class="fw-medium">{{ reclamoSeleccionado.direccion || 'No registrada' }}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Información del Reclamo -->
                    <div class="col-lg-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-header bg-transparent border-0 pb-0">
                                <div class="d-flex align-items-center">
                                    <div class="bg-danger bg-opacity-10 rounded-circle p-2 me-3">
                                        <i class="fas fa-exclamation-triangle text-danger"></i>
                                    </div>
                                    <h6 class="mb-0 fw-semibold">Información del Reclamo</h6>
                                </div>
                            </div>
                            <div class="card-body pt-3">
                                <div class="row g-3">
                                    <div class="col-sm-6">
                                        <div class="text-center p-3 bg-light rounded">
                                            <i class="fas fa-tag text-primary fs-4 mb-2 d-block"></i>
                                            <small class="text-muted d-block">Tipo</small>
                                            <h6 class="mb-0 text-primary fw-bold">{{ reclamoSeleccionado.tipo_reclamo | titlecase }}</h6>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="text-center p-3 bg-light rounded">
                                            <i class="fas fa-calendar-times text-warning fs-4 mb-2 d-block"></i>
                                            <small class="text-muted d-block">Fecha incidente</small>
                                            <h6 class="mb-0 text-warning fw-bold">{{ formatearFecha(reclamoSeleccionado.fecha_incidente) }}</h6>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                            <span class="text-muted">
                                                <i class="fas fa-calendar-plus me-2"></i>
                                                Fecha del reclamo
                                            </span>
                                            <span class="fw-medium font-monospace small">{{ formatearFecha(reclamoSeleccionado.created_at) }}</span>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                            <span class="text-muted">
                                                <i class="fas fa-sync-alt me-2"></i>
                                                Última actualización
                                            </span>
                                            <span class="fw-medium font-monospace small">{{ formatearFecha(reclamoSeleccionado.updated_at) }}</span>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center py-2" *ngIf="reclamoSeleccionado.monto_reclamado">
                                            <span class="text-muted">
                                                <i class="fas fa-dollar-sign me-2"></i>
                                                Monto reclamado
                                            </span>
                                            <span class="fw-medium">{{ formatearMonto(reclamoSeleccionado.monto_reclamado) }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <div class="card mt-4 border-0 shadow-sm" *ngIf="reclamoSeleccionado.tipo_bien || reclamoSeleccionado.descripcion_bien">
                    <div class="card-header bg-transparent border-0 pb-0">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="bg-warning bg-opacity-10 rounded-circle p-2 me-3">
                                    <i class="fas fa-box text-warning"></i>
                                </div>
                                <h6 class="mb-0 fw-semibold">Bien o Servicio Afectado</h6>
                            </div>
                        </div>
                    </div>
                    <div class="card-body pt-3">
                        <div class="row g-3">
                            <div class="col-md-6" *ngIf="reclamoSeleccionado.tipo_bien">
                                <div class="d-flex align-items-start">
                                    <i class="fas fa-tag text-muted me-2 mt-1"></i>
                                    <div class="flex-grow-1">
                                        <small class="text-muted d-block">Tipo de bien/servicio</small>
                                        <span class="fw-medium">{{ reclamoSeleccionado.tipo_bien | titlecase }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="reclamoSeleccionado.pedido_concreto">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-receipt text-muted me-2 mt-1"></i>
                                <div class="flex-grow-1">
                                <div class="text-start">
                                    <small class="text-muted d-block">Pedido específico</small>
                                    <span class="fw-medium d-inline-block text-break" style="float:none; position:static;">
                                    {{ reclamoSeleccionado.pedido_concreto }}
                                    </span>
                                </div>
                                </div>
                            </div>
                            </div>





                            <div class="col-12" *ngIf="reclamoSeleccionado.descripcion_bien">
                                <div class="d-flex align-items-start">
                                    <i class="fas fa-align-left text-muted me-2 mt-1"></i>
                                    <div class="flex-grow-1">
                                        <small class="text-muted d-block">Descripción del bien/servicio</small>
                                        <div class="mt-2 p-3 bg-light rounded border">
                                            <p class="mb-0 text-break">{{ reclamoSeleccionado.descripcion_bien }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detalle del Reclamo -->
                <div class="card mt-4 border-0 shadow-sm">
                    <div class="card-header bg-transparent border-0 pb-0">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="bg-info bg-opacity-10 rounded-circle p-2 me-3">
                                    <i class="fas fa-file-alt text-info"></i>
                                </div>
                                <h6 class="mb-0 fw-semibold">Detalle del {{ reclamoSeleccionado.tipo_reclamo | titlecase }}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="card-body pt-3">
                        <div class="p-4 bg-light rounded border">
                            <p class="mb-0 text-break">{{ reclamoSeleccionado.detalle_reclamo }}</p>
                        </div>
                    </div>
                </div>

                <!-- Seguimiento y fechas -->
                <div class="card mt-4 border-0 shadow-sm">
                    <div class="card-header bg-transparent border-0 pb-0">
                        <div class="d-flex align-items-center">
                            <div class="bg-secondary bg-opacity-10 rounded-circle p-2 me-3">
                                <i class="fas fa-clock text-secondary"></i>
                            </div>
                            <h6 class="mb-0 fw-semibold">Seguimiento</h6>
                        </div>
                    </div>
                    <div class="card-body pt-3">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="text-center p-3 bg-light rounded">
                                    <i class="fas fa-calendar-plus text-primary fs-4 mb-2 d-block"></i>
                                    <small class="text-muted d-block">Fecha de registro</small>
                                    <span class="fw-medium small">{{ formatearFecha(reclamoSeleccionado.created_at) }}</span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center p-3 bg-light rounded">
                                    <i class="fas fa-sync-alt text-warning fs-4 mb-2 d-block"></i>
                                    <small class="text-muted d-block">Última actualización</small>
                                    <span class="fw-medium small">{{ formatearFecha(reclamoSeleccionado.updated_at) }}</span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center p-3 bg-light rounded">
                                    <i class="fas fa-calendar-check text-success fs-4 mb-2 d-block"></i>
                                    <small class="text-muted d-block">Fecha del incidente</small>
                                    <span class="fw-medium small">{{ formatearFecha(reclamoSeleccionado.fecha_incidente) }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer del modal -->
            <div class="modal-footer border-0 bg-light">
                <!-- Cambio de estado -->
                <div class="d-flex align-items-center flex-wrap gap-3 me-auto" *ngIf="reclamoSeleccionado">
                    <div class="d-flex align-items-center gap-2">
                        <i class="fas fa-edit text-primary"></i>
                        <label class="form-label mb-0 fw-medium">Cambiar estado:</label>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <select 
                            class="form-select"
                            style="width: 200px;"
                            [value]="reclamoSeleccionado.estado"
                            (change)="actualizarEstado(reclamoSeleccionado, estadoSelect.value)"
                            [disabled]="actualizandoEstado"
                            #estadoSelect
                        >
                            <option value="pendiente">Pendiente (Actual)</option>
                            <option value="en_proceso">En Proceso</option>
                            <option value="resuelto">Resuelto</option>
                        </select>
                        <button 
                            class="btn btn-primary"
                            [disabled]="actualizandoEstado"
                            (click)="actualizarEstado(reclamoSeleccionado, estadoSelect.value)"
                        >
                            <span *ngIf="actualizandoEstado">
                                <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                                Actualizando...
                            </span>
                            <span *ngIf="!actualizandoEstado">
                                <i class="fas fa-save me-2"></i>
                                Actualizar
                            </span>
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>