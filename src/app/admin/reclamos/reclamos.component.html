<div class="container-fluid py-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="h2 fw-bold">Gestión de Reclamos y Quejas</h1>
        </div>
    </div>

    <!-- Estadísticas -->
    <!-- Estadísticas Mejoradas -->
<div class="row mb-4" *ngIf="estadisticas">
    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-total h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-primary bg-opacity-10 text-primary mb-2">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.total | number }}</div>
                        <div class="stat-label">Total de Casos</div>
                        <div class="stat-trend text-muted">
                            <small><i class="fas fa-info-circle me-1"></i>Todos los registros</small>
                        </div>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-warning h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-warning bg-opacity-10 text-warning mb-2">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.pendientes | number }}</div>
                        <div class="stat-label">Pendientes</div>
                        <div class="stat-trend" [class]="getPorcentajePendientes() > 50 ? 'text-warning' : 'text-muted'">
                            <small>
                                <i class="fas fa-percentage me-1"></i>
                                {{ getPorcentajePendientes() }}% del total
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-warning bg-opacity-20 text-warning" *ngIf="estadisticas.pendientes > 0">
                        <i class="fas fa-exclamation"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-info h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-info bg-opacity-10 text-info mb-2">
                            <i class="fas fa-cog fa-spin"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.en_proceso | number }}</div>
                        <div class="stat-label">En Proceso</div>
                        <div class="stat-trend text-info">
                            <small>
                                <i class="fas fa-arrow-right me-1"></i>
                                {{ getPorcentajeEnProceso() }}% activos
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-info bg-opacity-20 text-info" *ngIf="estadisticas.en_proceso > 0">
                        <div class="spinner-border spinner-border-sm"></div>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-success h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-success bg-opacity-10 text-success mb-2">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.resueltas | number }}</div>
                        <div class="stat-label">Resueltas</div>
                        <div class="stat-trend text-success">
                            <small>
                                <i class="fas fa-chart-line me-1"></i>
                                {{ getPorcentajeResueltas() }}% completadas
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-success bg-opacity-20 text-success" *ngIf="estadisticas.resueltas > 0">
                        <i class="fas fa-check"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-danger h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-danger bg-opacity-10 text-danger mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.reclamos | number }}</div>
                        <div class="stat-label">Reclamos</div>
                        <div class="stat-trend text-danger">
                            <small>
                                <i class="fas fa-fire me-1"></i>
                                {{ getPorcentajeReclamos() }}% críticos
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-danger bg-opacity-20 text-danger" *ngIf="estadisticas.reclamos > 0">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-lg-4 col-md-6 mb-3">
        <div class="card stat-card stat-card-secondary h-100 border-0 shadow-sm">
            <div class="card-body position-relative overflow-hidden">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <div class="stat-icon bg-secondary bg-opacity-10 text-secondary mb-2">
                            <i class="fas fa-comment-dots"></i>
                        </div>
                        <div class="stat-number">{{ estadisticas.quejas | number }}</div>
                        <div class="stat-label">Quejas</div>
                        <div class="stat-trend text-secondary">
                            <small>
                                <i class="fas fa-comment me-1"></i>
                                {{ getPorcentajeQuejas() }}% del total
                            </small>
                        </div>
                    </div>
                    <div class="stat-badge bg-secondary bg-opacity-20 text-secondary" *ngIf="estadisticas.quejas > 0">
                        <i class="fas fa-comment"></i>
                    </div>
                </div>
                <div class="stat-bg-pattern"></div>
            </div>
        </div>
    </div>
</div>

<!-- Resumen visual adicional -->
<div class="row mb-4" *ngIf="estadisticas && estadisticas.total > 0">
    <div class="col-12">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-chart-bar text-primary me-2"></i>
                        Distribución de Estados
                    </h6>
                    <small class="text-muted">{{ getUltimaActualizacion() }}</small>
                </div>
                
                <div class="progress-stacked mb-3" style="height: 20px;">
                    <div class="progress-bar bg-warning" 
                         role="progressbar" 
                         [style.width.%]="getPorcentajePendientes()"
                         [attr.aria-valuenow]="getPorcentajePendientes()"
                         aria-valuemin="0" 
                         aria-valuemax="100"
                         [title]="'Pendientes: ' + getPorcentajePendientes() + '%'">
                    </div>
                    <div class="progress-bar bg-info" 
                         role="progressbar" 
                         [style.width.%]="getPorcentajeEnProceso()"
                         [attr.aria-valuenow]="getPorcentajeEnProceso()"
                         [title]="'En Proceso: ' + getPorcentajeEnProceso() + '%'">
                    </div>
                    <div class="progress-bar bg-success" 
                         role="progressbar" 
                         [style.width.%]="getPorcentajeResueltas()"
                         [attr.aria-valuenow]="getPorcentajeResueltas()"
                         [title]="'Resueltas: ' + getPorcentajeResueltas() + '%'">
                    </div>
                </div>

                <div class="row text-center">
                    <div class="col-4">
                        <div class="d-flex align-items-center justify-content-center">
                            <div class="me-2 bg-warning rounded" style="width: 12px; height: 12px;"></div>
                            <small class="text-muted">Pendientes ({{ getPorcentajePendientes() }}%)</small>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="d-flex align-items-center justify-content-center">
                            <div class="me-2 bg-info rounded" style="width: 12px; height: 12px;"></div>
                            <small class="text-muted">En Proceso ({{ getPorcentajeEnProceso() }}%)</small>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="d-flex align-items-center justify-content-center">
                            <div class="me-2 bg-success rounded" style="width: 12px; height: 12px;"></div>
                            <small class="text-muted">Resueltas ({{ getPorcentajeResueltas() }}%)</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- Filtros -->
    <div class="card mb-4">
        <div class="card-body">
            <div class="row g-3">
                <!-- Búsqueda -->
                <div class="col-md-2">
                    <label class="form-label fw-semibold">Buscar:</label>
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Número, DNI, nombre o email..."
                        [(ngModel)]="filtros.buscar"
                        (keyup.enter)="aplicarFiltros()"
                    />
                </div>

                <!-- Estado -->
                <div class="col-md-2">
                    <label class="form-label fw-semibold">Estado:</label>
                    <select class="form-select" [(ngModel)]="filtros.estado">
                        <option *ngFor="let opcion of estadosOptions" [value]="opcion.value">
                            {{ opcion.label }}
                        </option>
                    </select>
                </div>

                <!-- Tipo -->
                <div class="col-md-2">
                    <label class="form-label fw-semibold">Tipo:</label>
                    <select class="form-select" [(ngModel)]="filtros.tipo_reclamo">
                        <option *ngFor="let opcion of tiposReclamoOptions" [value]="opcion.value">
                            {{ opcion.label }}
                        </option>
                    </select>
                </div>

                <!-- Fecha desde -->
                <div class="col-md-2">
                    <label class="form-label fw-semibold">Desde:</label>
                    <input
                        type="date"
                        class="form-control"
                        [(ngModel)]="filtros.fecha_desde"
                    />
                </div>

                <!-- Fecha hasta -->
                <div class="col-md-2">
                    <label class="form-label fw-semibold">Hasta:</label>
                    <input
                        type="date"
                        class="form-control"
                        [(ngModel)]="filtros.fecha_hasta"
                    />
                </div>

                <!-- Botones -->
                <div class="col-md-1 d-flex align-items-end">
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" (click)="aplicarFiltros()" [disabled]="cargando">
                            <span *ngIf="!cargando"></span>
                            <span *ngIf="cargando" class="spinner-border spinner-border-sm me-1"></span>
                            {{ cargando ? 'Cargando...' : 'Buscar' }}
                        </button>
                        <button class="btn btn-outline-secondary" (click)="limpiarFiltros()" [disabled]="cargando">
                             Limpiar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div *ngIf="cargando" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3">Cargando reclamos...</p>
    </div>

    <!-- Error -->
    <div *ngIf="error && !cargando" class="alert alert-danger" role="alert">
        <div class="d-flex align-items-center">
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
        </div>
        <button class="btn btn-outline-danger mt-2" (click)="cargarReclamos()">
            Reintentar
        </button>
    </div>

    <!-- Tabla de reclamos -->
    <div *ngIf="!cargando && !error" class="card">
        <!-- Info de resultados -->
        <div class="card-header bg-light" *ngIf="paginacion">
            <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted">
                    Mostrando {{ paginacion.from }} - {{ paginacion.to }} de {{ paginacion.total }} reclamos
                </small>
                <small class="text-muted">
                    Página {{ paginacion.current_page }} de {{ paginacion.last_page }}
                </small>
            </div>
        </div>

        <!-- Tabla -->
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>N° Reclamo</th>
                        <th>Cliente</th>
                        <th>Documento</th>
                        <th>Tipo</th>
                        <th>Estado</th>
                        <th>Fecha</th>
                        <th class="text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reclamo of reclamos">
                        <!-- Número -->
                        <td>
                            <code class="text-primary fw-bold">{{ reclamo.numero_reclamo }}</code>
                        </td>

                        <!-- Cliente -->
                        <td>
                            <div>
                                <div class="fw-semibold">{{ getNombreCompleto(reclamo) }}</div>
                                <small class="text-muted" *ngIf="reclamo.email">{{ reclamo.email }}</small>
                            </div>
                        </td>

                        <!-- Documento -->
                        <td>
                            <code class="text-muted">{{ reclamo.numero_documento }}</code>
                        </td>

                        <!-- Tipo -->
                        <td>
                            <span class="badge" 
                                  [class]="reclamo.tipo_reclamo === 'reclamo' ? 'bg-danger' : 'bg-secondary'">
                                {{ reclamo.tipo_reclamo | titlecase }}
                            </span>
                        </td>

                        <!-- Estado -->
                        <td>
                            <span class="badge" 
                                  [class]="reclamo.estado === 'pendiente' ? 'bg-warning text-dark' : 
                                           reclamo.estado === 'en_proceso' ? 'bg-info' : 'bg-success'">
                                {{ reclamo.estado === 'en_proceso' ? 'En Proceso' : (reclamo.estado | titlecase) }}
                            </span>
                        </td>

                        <!-- Fecha -->
                        <td>
                            <small class="text-muted">{{ formatearFecha(reclamo.created_at) }}</small>
                        </td>

                        <!-- Acciones -->
                        <td class="text-center">
                        <div class="d-flex justify-content-center gap-1">
                            <!-- Ver Detalle -->
                            <button 
                            class="btn btn-outline-info btn-sm" 
                            (click)="verDetalle(reclamo)"
                            title="Ver detalle"
                            >
                            <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        </td>
                    </tr>

                    <!-- Estado vacío -->
                    <tr *ngIf="reclamos.length === 0">
                        <td colspan="7" class="text-center py-5">
                            <div class="text-muted">
                                <div class="display-1 mb-3">📝</div>
                                <h4>No hay reclamos</h4>
                                <p>No se encontraron reclamos con los filtros aplicados.</p>
                                <button class="btn btn-primary" (click)="limpiarFiltros()">
                                    Ver todos los reclamos
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Paginación -->
        <div *ngIf="paginacion && paginacion.last_page > 1" class="card-footer">
            <nav>
                <ul class="pagination justify-content-center mb-0">
                    <li class="page-item" [class.disabled]="paginacion.current_page === 1">
                        <button class="page-link" 
                                (click)="cambiarPagina(paginacion.current_page - 1)"
                                [disabled]="paginacion.current_page === 1">
                            Anterior
                        </button>
                    </li>
                    
                    <li *ngFor="let pagina of getPaginasVisibles()" 
                        class="page-item"
                        [class.active]="pagina === paginacion.current_page"
                        [class.disabled]="pagina === -1">
                        <button class="page-link" 
                                (click)="cambiarPagina(pagina)"
                                [disabled]="pagina === -1">
                            <span *ngIf="pagina !== -1">{{ pagina }}</span>
                            <span *ngIf="pagina === -1">...</span>
                        </button>
                    </li>
                    
                    <li class="page-item" [class.disabled]="paginacion.current_page === paginacion.last_page">
                        <button class="page-link" 
                                (click)="cambiarPagina(paginacion.current_page + 1)"
                                [disabled]="paginacion.current_page === paginacion.last_page">
                            Siguiente
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <!-- Modal de detalle -->
    <div *ngIf="mostrandoDetalle && reclamoSeleccionado" 
         class="modal d-block" tabindex="-1" 
         style="background-color: rgba(0,0,0,0.5);"
         (click)="cerrarDetalle()">
        <div class="modal-dialog modal-xl modal-dialog-scrollable" (click)="$event.stopPropagation()">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title d-flex align-items-center gap-2">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        Detalle del Reclamo {{ reclamoSeleccionado.numero_reclamo }}
                    </h5>
                    <button type="button" class="btn-close" (click)="cerrarDetalle()"></button>
                </div>

                <div class="modal-body">
                    <div class="row g-4">
                        <!-- Información del cliente -->
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="card-title mb-0 d-flex align-items-center gap-2">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        Información del Cliente
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label fw-semibold">Nombre completo:</label>
                                        <p class="mb-0">{{ getNombreCompleto(reclamoSeleccionado) }}</p>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label fw-semibold">Documento:</label>
                                        <p class="mb-0">{{ reclamoSeleccionado.tipo_documento | uppercase }} - {{ reclamoSeleccionado.numero_documento }}</p>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label fw-semibold">Email:</label>
                                        <p class="mb-0">{{ reclamoSeleccionado.email }}</p>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label fw-semibold">Teléfono:</label>
                                        <p class="mb-0">{{ reclamoSeleccionado.telefono }}</p>
                                    </div>
                                    <div class="mb-0">
                                        <label class="form-label fw-semibold">Dirección:</label>
                                        <p class="mb-0">{{ reclamoSeleccionado.direccion }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Información del reclamo -->
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="card-title mb-0 d-flex align-items-center gap-2">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                                            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                        </svg>
                                        Información del Reclamo
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label fw-semibold">Tipo:</label>
                                        <div>
                                            <span class="badge" 
                                                  [class]="reclamoSeleccionado.tipo_reclamo === 'reclamo' ? 'bg-danger' : 'bg-secondary'">
                                                {{ reclamoSeleccionado.tipo_reclamo | titlecase }}
                                            </span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label fw-semibold">Estado:</label>
                                        <div>
                                            <span class="badge" 
                                                  [class]="reclamoSeleccionado.estado === 'pendiente' ? 'bg-warning text-dark' : 
                                                           reclamoSeleccionado.estado === 'en_proceso' ? 'bg-info' : 'bg-success'">
                                                {{ reclamoSeleccionado.estado | titlecase }}
                                            </span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label fw-semibold">Fecha del incidente:</label>
                                        <p class="mb-0">{{ reclamoSeleccionado.fecha_incidente | date:'dd/MM/yyyy' }}</p>
                                    </div>
                                    <div class="mb-0">
                                        <label class="form-label fw-semibold">Monto reclamado:</label>
                                        <p class="mb-0">
                                            <span *ngIf="reclamoSeleccionado.monto_reclamado">
                                                {{ formatearMonto(reclamoSeleccionado.monto_reclamado) }}
                                            </span>
                                            <span *ngIf="!reclamoSeleccionado.monto_reclamado" class="text-muted">
                                                No especificado
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bien o servicio -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="card-title mb-0 d-flex align-items-center gap-2">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                                            <path d="M3 6h18"></path>
                                            <path d="M16 10a4 4 0 0 1-8 0"></path>
                                        </svg>
                                        Bien o Servicio
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label fw-semibold">Tipo:</label>
                                                <p class="mb-0">{{ reclamoSeleccionado.tipo_bien | titlecase }}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6" *ngIf="reclamoSeleccionado.pedido_concreto">
                                            <div class="mb-3">
                                                <label class="form-label fw-semibold">Pedido específico:</label>
                                                <p class="mb-0">{{ reclamoSeleccionado.pedido_concreto }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-0">
                                        <label class="form-label fw-semibold">Descripción:</label>
                                        <div class="border p-3 bg-light rounded">
                                            <p class="mb-0">{{ reclamoSeleccionado.descripcion_bien }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Detalle del reclamo -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="card-title mb-0 d-flex align-items-center gap-2">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14,2 14,8 20,8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                            <polyline points="10,9 9,9 8,9"></polyline>
                                        </svg>
                                        Detalle del {{ reclamoSeleccionado.tipo_reclamo | titlecase }}
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="border p-3 bg-light rounded">
                                        <p class="mb-0">{{ reclamoSeleccionado.detalle_reclamo }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Fechas -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="card-title mb-0 d-flex align-items-center gap-2">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                        Fechas
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="form-label fw-semibold">Fecha de registro:</label>
                                            <p class="mb-0">{{ formatearFecha(reclamoSeleccionado.created_at) }}</p>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-semibold">Última actualización:</label>
                                            <p class="mb-0">{{ formatearFecha(reclamoSeleccionado.updated_at) }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <div class="d-flex align-items-center gap-3">
                        <label class="form-label fw-semibold mb-0">Cambiar estado:</label>
                        <select class="form-select" 
                                style="width: auto;"
                                [value]="reclamoSeleccionado.estado"
                                (change)="actualizarEstado(reclamoSeleccionado, estadoSelect.value)"
                                [disabled]="actualizandoEstado"
                                #estadoSelect>
                            <option value="pendiente">Pendiente</option>
                            <option value="en_proceso">En Proceso</option>
                            <option value="resuelto">Resuelto</option>
                        </select>
                        <span *ngIf="actualizandoEstado" class="text-muted d-flex align-items-center gap-2">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="animate-spin">
                                <path d="M21 12a9 9 0 11-6.219-8.56"></path>
                            </svg>
                            Actualizando...
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>